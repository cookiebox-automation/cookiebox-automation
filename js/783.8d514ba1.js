"use strict";(self["webpackChunkcookiebox"]=self["webpackChunkcookiebox"]||[]).push([[783],{8783:function(t,e,i){i.r(e),i.d(e,{default:function(){return E}});var s=i(2781),r=i(375),o=i(7889),a=i(3960),n=(i(4114),i(8111),i(2489),i(3579),i(1723)),l=i(5471),d=l.Ay.extend({name:"rippleable",directives:{ripple:n.A},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),c=i(5088),p=i(3507);function u(t){t.preventDefault()}var h=(0,p.A)(a.A,d,c.A).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=a.A.options.methods.genLabel.call(this);return t?(t.data.on={click:u},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:u},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const i=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===i&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}}),x=h.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...a.A.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick((()=>this.inputIndeterminate=t))},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(o.A,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...e,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}}),b=(i(7588),i(125),i(4961)),g=i(6960);const m=["sm","md","lg","xl"],v=(()=>m.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),f=(()=>m.reduce(((t,e)=>(t["offset"+(0,g.Zb)(e)]={type:[String,Number],default:null},t)),{}))(),y=(()=>m.reduce(((t,e)=>(t["order"+(0,g.Zb)(e)]={type:[String,Number],default:null},t)),{}))(),C={col:Object.keys(v),offset:Object.keys(f),order:Object.keys(y)};function S(t,e,i){let s=t;if(null!=i&&!1!==i){if(e){const i=e.replace(t,"");s+=`-${i}`}return"col"!==t||""!==i&&!0!==i?(s+=`-${i}`,s.toLowerCase()):s.toLowerCase()}}const A=new Map;var w=l.Ay.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...v,offset:{type:[String,Number],default:null},...f,order:{type:[String,Number],default:null},...y,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:i,children:s,parent:r}){let o="";for(const n in e)o+=String(e[n]);let a=A.get(o);if(!a){let t;for(t in a=[],C)C[t].forEach((i=>{const s=e[i],r=S(t,i,s);r&&a.push(r)}));const i=a.some((t=>t.startsWith("col-")));a.push({col:!i||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),A.set(o,a)}return t(e.tag,(0,b.Ay)(i,{class:a}),s)}});function D(t){return l.Ay.extend({name:`v-${t}`,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(e,{props:i,data:s,children:r}){s.staticClass=`${t} ${s.staticClass||""}`.trim();const{attrs:o}=s;if(o){s.attrs={};const t=Object.keys(o).filter((t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(s.attrs[t]=e,!1):e||"string"===typeof e}));t.length&&(s.staticClass+=` ${t.join(" ")}`)}return i.id&&(s.domProps=s.domProps||{},s.domProps.id=i.id),e(i.tag,s,r)}})}var _=D("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:i,children:s}){let r;const{attrs:o}=i;return o&&(i.attrs={},r=Object.keys(o).filter((t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}))),e.id&&(i.domProps=i.domProps||{},i.domProps.id=e.id),t(e.tag,(0,b.Ay)(i,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(r||[])}),s)}}),k=i(8230),I=i(2585),$=i(8412),B=i(9548),j=(0,g.Gn)("spacer","div","v-spacer"),V=i(9940);const L=(0,p.A)(V.A);var O=L.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...V.A.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"},genInput(){const t=V.A.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){V.A.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),T=function(){var t=this,e=t._self._c;return t.isLogin?t.isScanning?e($.A,{staticClass:"h-100 pa-6",attrs:{justify:"center"}},[e("div",[e($.A,{attrs:{justify:"end"}},[e(r.A,{staticClass:"ma-4 px-6",attrs:{to:"/admin",outlined:"",color:"#00559b"}},[t._v("مشاهده لیست جعبه ها")])],1),e($.A,{staticClass:"px-3",attrs:{justify:"center"}},[e("div",{staticClass:"rounded-xl mt-4",staticStyle:{width:"100%",height:"70vh",border:"1px solid grey",overflow:"hidden"}},[e("qrcode-stream",{on:{decode:t.onDecode,init:t.onInit}})],1)]),e($.A,{attrs:{justify:"center"}},[e("h3",[t._v("... scaning")])]),e($.A,{attrs:{justify:"center"}},[t.decodedContent?e("p",[t._v("نتیجه: "+t._s(t.decodedContent))]):t._e()])],1)]):t.isLogin&&t.isLoading?e($.A,{staticClass:"h-100",attrs:{justify:"center",align:"center"}},[e(I.A,{attrs:{indeterminate:"",color:"primary"}})],1):t.isLogin&&t.box.Status?e("div",{staticClass:"py-6 rtl",staticStyle:{direction:"rtl"}},[e($.A,{attrs:{justify:"center"}},[e("span",{style:{color:t.box.dontsend?"red":"ready"==t.box.Status?"#003ac3":"delivered_to_driver"==t.box.Status||"delivered_to_customer"==t.box.Status?"green":"red"}},[t._v(" "+t._s(t.box.dontsend?"!!!ارسال نشود":"ready"==t.box.Status?"در انتظار تحویل به راننده":"delivered_to_driver"==t.box.Status?"به راننده تحویل داده شد":"delivered_to_customer"==t.box.Status?"تحویل شده به مشتری":"مرجوع شده")+" ")])]),t.box&&t.box.Status?e($.A,{staticClass:"px-6",attrs:{justify:"center"}},[e("div",{staticClass:"mb-12",staticStyle:{"max-width":"323px",width:"100%"}},[e("div",{staticClass:"page",staticStyle:{padding:"15px","padding-top":"2px","margin-right":"0","margin-top":"25px","margin-bottom":"7px",position:"relative","min-height":"220px","max-width":"323px",width:"100%","background-color":"#fff",border:"1px solid","border-radius":"2px"},style:{borderColor:t.box.dontsend?"red":"grey"}},[e($.A,{staticClass:"pa-3",attrs:{justify:"center"}},[e("span",{staticStyle:{width:"100%","text-align":"center"}},[e("b",{staticStyle:{border:"1px solid",padding:"0 4px"},style:{borderColor:t.box.dontsend?"red":"#878787"}},[t._v(" "+t._s(t.box.DriverBoxCount)+" ")]),t.box.ShamsiDate?e("b",{staticStyle:{border:"1px solid #878787",padding:"0 4px"},style:{borderColor:t.box.dontsend?"red":"#878787"}},[t._v(" "+t._s(t.box.ShamsiDate.slice(5))+" ")]):t._e(),e("b",{staticStyle:{border:"1px solid #878787",padding:"0 4px"},style:{borderColor:t.box.dontsend?"red":"#878787"}},[t._v(" جعبه شماره "+t._s(t.box.index)+" از "+t._s(t.box.length)+" ")])])]),e($.A,{staticStyle:{"align-items":"center","justify-content":"center",background:"#fff","padding-right":"16px","padding-left":"16px","min-height":"170px"},style:{background:"url("+("محمد بابا گلي"==t.box.DriverCode||"01"==t.box.DriverCode?"1.png":"فروشگاه گلستان"==t.box.DriverCode?"گلستان.png":"فروشگاه كوه نور"==t.box.DriverCode?"111.png":"فروشگاه جردن"==t.box.DriverCode?"جردن.png":"فروشگاه سام سنتر"==t.box.DriverCode?"222.png":"منوچهر اشرفي"==t.box.DriverCode||"02"==t.box.DriverCode?"2.png":"فريد باباگلي"==t.box.DriverCode||"03"==t.box.DriverCode?"3.png":"محمد براتي"==t.box.DriverCode||"05"==t.box.DriverCode?"5.png":"علي محمدي"==t.box.DriverCode||"06"==t.box.DriverCode?"6.png":"جواد پوربجنوردي"==t.box.DriverCode||"07"==t.box.DriverCode?"7.png":"08"==t.box.DriverCode?"8.png":"4.png")+")"}},[e("div",{staticStyle:{width:"100%",height:"fit-content"}},t._l(t.box.Items,(function(i,s){return e($.A,{key:"rowOrderLabe"+s,style:{height:t.box.Items.length>=11?"15px":"22px"}},[e("span",{style:{fontSize:"15px",lineHeight:t.box.Items.length>=9&&t.box.Items.length<11?"18px":t.box.Items.length>=11&&"16px"}},[t._v(" "+t._s(i.name)+" ")]),e(j),e("span",{staticClass:"mr-4",style:{fontSize:t.box.Items.length>6?"12px":"16px",lineHeight:t.box.Items.length>=9&&"18px"}},[t._v(t._s(i.quanity))])],1)})),1)]),e($.A,{staticClass:"mt-6 pl-3",staticStyle:{"border-top":"1px solid black","font-size":"12px","justify-content":"space-between","align-items":"center","flex-wrap":"nowrap"},style:{borderColor:t.box.dontsend?"red":"black"}},[e("h2",{staticStyle:{"font-size":"20px !important"}},[t._v(" "+t._s("محمد بابا گلي"==t.box.DriverCode||"01"==t.box.DriverCode?"01":"فروشگاه گلستان"==t.box.DriverCode?"گلستان":"فروشگاه كوه نور"==t.box.DriverCode?"کوه نور":"فروشگاه جردن"==t.box.DriverCode?"جردن":"فروشگاه سام سنتر"==t.box.DriverCode?"سام سنتر":"منوچهر اشرفي"==t.box.DriverCode||"02"==t.box.DriverCode?"02":"فريد باباگلي"==t.box.DriverCode||"03"==t.box.DriverCode?"03":"محمد براتي"==t.box.DriverCode||"05"==t.box.DriverCode?"05":"علي محمدي"==t.box.DriverCode||"06"==t.box.DriverCode?"06":"جواد پوربجنوردي"==t.box.DriverCode||"07"==t.box.DriverCode?"07":"08"==t.box.DriverCode?"08":"04")+" ")]),e("div",{staticStyle:{"white-space":"nowrap"}},[t.box.ShopName.length<25?e("h2",{staticStyle:{"font-size":"23px !important","text-shadow":"1px 1px BLACK"}},[t._v(" "+t._s(t.box.ShopName)+" ")]):e("h3",{staticStyle:{"font-size":"15px !important","text-shadow":"1px 1px BLACK"}},[t._v(" "+t._s(t.box.ShopName)+" ")])]),e("div",{staticStyle:{position:"relative","text-shadow":"1px 1px BLACK"}},[e($.A,[e("h2",{staticStyle:{"font-size":"20px !important","text-shadow":"1px 1px BLACK"}},[t._v(" "+t._s(t.box.index)+"/"+t._s(t.box.length)+" ")])]),e($.A,{staticStyle:{position:"absolute",left:"9px",bottom:"-7px","white-space":"nowrap"}},[t._v(" "+t._s(t.box.emptySize>=.7?"کوچک":"")+" ")])],1)])],1),t.box.dontsend?t._e():e($.A,{attrs:{align:"center"}},[e(x,{staticStyle:{"max-width":"323px"},attrs:{disabled:t.disabelChangeDriver,outlined:"","hide-details":""},on:{change:function(e){t.box.Driver2=""}},model:{value:t.box.SendByOther,callback:function(e){t.$set(t.box,"SendByOther",e)},expression:"box.SendByOther"}}),e("span",{staticClass:"mt-5",style:{color:t.box.SendByOther?"black":"#878787"}},[t._v(" راننده شخص دیگری است؟ ")])],1)],1)]):t._e(),t.box&&!t.box.dontsend&&t.box.Status?e(k.A,[t.box.SendByOther?e($.A,{staticClass:"mb-5",attrs:{justify:"center"}},[e(B.A,{staticStyle:{"max-width":"323px"},attrs:{disabled:t.disabelChangeDriver,items:t.drivers,outlined:"",placeholder:"انتخاب راننده","hide-details":""},model:{value:t.box.Driver2,callback:function(e){t.$set(t.box,"Driver2",e)},expression:"box.Driver2"}})],1):t._e()],1):t._e(),t.box&&t.box.Status&&!t.box.dontsend?e($.A,{attrs:{justify:"center"}},[e("div",{staticClass:"mx-2",staticStyle:{position:"relative",width:"100%","max-width":"323px"}},[e(O,{staticClass:"w-100",staticStyle:{"max-width":"323px"},attrs:{"auto-grow":"",placeholder:"توضیحات تکمیلی",outlined:"",rows:"1","prepend-inner-icon":"mdi-comment","hide-details":""},model:{value:t.box.Description,callback:function(e){t.$set(t.box,"Description",e)},expression:"box.Description"}})],1)]):t._e(),t.box&&t.box.Status&&!t.box.dontsend?e($.A,{attrs:{justify:"center"}},[e(r.A,{staticClass:"px-12 mt-3",staticStyle:{background:"rgb(0, 142, 255)","border-radius":"4px"},attrs:{dark:""},on:{click:function(e){return t.changeStatus(t.box._id,t.box.Status,"isDescription")}}},[t._v(" تحویل شد به راننده ")])],1):t._e(),t.showAlert?e(s.A,{staticStyle:{position:"fixed",right:"10px",bottom:"0"},attrs:{border:"top",color:"error"==t.alertType?"red lighten-2":"green lighten2",dark:""}},[t._v(" "+t._s(t.alertText)+" ")]):t._e()],1):t._e():e("div",{staticClass:"py-6 rtl",staticStyle:{direction:"rtl"}},[e($.A,{staticClass:"px-6",attrs:{justify:"center"}},[e("div",{staticClass:"page",staticStyle:{padding:"15px","padding-top":"2px","margin-right":"0","margin-top":"25px","margin-bottom":"7px",position:"relative","min-height":"220px","max-width":"323px",width:"100%","background-color":"#fff",border:"1px solid grey","border-radius":"2px"}},[e($.A,{staticClass:"py-3",attrs:{justify:"center"}},[t._v(" ورود کاربر ")]),e(k.A,{ref:"form",attrs:{"lazy-validation":""}},[e(_,[e($.A,[e(w,{attrs:{cols:"12"}},[e(V.A,{attrs:{rules:t.nameRules,label:"نام کاربری",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e(w,{attrs:{cols:"12"}},[e(V.A,{attrs:{rules:t.nameRules,label:"رمز عبور",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),e("span",{staticClass:"red--text"},[t._v(" "+t._s(t.errorrMessage)+" ")])],1)],1),e($.A,{staticClass:"py-3",attrs:{justify:"center"}},[e(r.A,{staticClass:"px-4 mt-3",attrs:{color:"green",dark:""},on:{click:t.validate}},[t._v("ورود")])],1)],1)])],1)},z=[],N=i(4335);N.A.defaults.headers.common["Token"]="CookiBox",N.A.defaults.headers.common["Password"]="92jngv4908ed",N.A.defaults.headers.common["Access-Control-Allow-Origin"]="*";var H={name:"qr-code",components:{},data:()=>({date:"",drivers:["01","02","03","04","05","06","07","08","فروشگاه سام سنتر","فروشگاه كوه نور","فروشگاه گلستان","فروشگاه جردن","متفرقه"],disabelChangeDriver:!1,decodedContent:"",showAlert:!1,alertType:"error",alertText:"",emptyQuery:!0,box:{},username:"",password:"",loadingButton:!1,isLogin:!1,isLoading:!0,isScanning:!0,nameRules:[t=>!!t||"فیلد اجباری"],errorrMessage:"",items:[{text:"آماده تحویل",value:"ready"},{text:"تحویل شده به راننده",value:"delivered_to_driver"},{text:"تحویل شده به مشتری",value:"delivered_to_customer"},{text:"مرجوع شده",value:"returned"}],status:"ready"}),watch:{status(){}},methods:{getBox(t,e){return new Promise((i=>{let s=this;s.isScanning=!1;let r=new Date(t);r.setDate(r.getDate());const o=r.getTime();N.A.get("https://172.16.16.15:3000/api/dispatch/"+(o+864e5)+"/boxes/"+e,{}).then((function(e){s.date=t,s.box=e.data.data,s.drivers=s.drivers.filter((t=>t!=e.data.data.DriverCode)),s.disabelChangeDriver=e.data.disabelChangeDriver,s.isLoading=!1})).catch((function(t){console.log(t.response.data.errors[0].msg)}))}))},changeStatus(t,e,i){return new Promise((e=>{if(this.isLoading=!0,this.box.SendByOther&&!this.box.Driver2)this.showAlert=!0,this.alertType="error",this.alertText="انتخاب راننده اجباریست!";else{let i=this;i.loadingButton=!0;let s=new Date(i.date);s.setDate(s.getDate()+1);const r=s.getTime();N.A.put("https://172.16.16.15:3000/api/dispatch/"+r+"/boxes/"+t+"/delivered_to_driver",{description:i.box.Description,SendByOther:i.box.SendByOther,Driver2:i.box.Driver2}).then((function(t){i.box=t.data.data,e(t.data),i.loadingButton=!1,i.showAlert=!0,i.alertType="success",i.alertText="بروزرسانی با موفقیت انجام شد",i.isLoading=!1,setTimeout((()=>{i.showAlert=!1,i.isScanning=!0}),3e3)})).catch((function(t){console.log(t.response.data.errors[0].msg)}))}}))},validate(){this.$refs.form.validate()&&("operator"==this.username&&"operator"==this.password?(localStorage.setItem("loginCookiebox","operator"),this.isLogin=!0):this.errorrMessage="نام کاربری یا رمزعبور اشتباه است")},onDecode(t){let e=t.split("&");this.decodedContent=e;let i=e[0].split("=");i=i[1];let s=e[1].split("=");s=s[1],this.getBox(i,s)},onInit(t){t.catch((t=>{"NotAllowedError"===t.name?alert("اجازه دسترسی به دوربین داده نشد"):"NotFoundError"===t.name?alert("هیچ دوربینی پیدا نشد"):alert("خطا: "+t.message)}))}},created(){"operator"==localStorage.getItem("loginCookiebox")&&(this.isLogin=!0)}},P=H,G=i(1656),R=(0,G.A)(P,T,z,!1,null,null,null),E=R.exports}}]);
//# sourceMappingURL=783.8d514ba1.js.map